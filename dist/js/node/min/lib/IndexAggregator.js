!function(t){"use strict";var i=function(){this._keys=[],this._priority_keys=[]};i.prototype.init=function(t,i){for(var r=0,e=t.length;r<e;r+=1)this.set(t[r]);Array.isArray(i)?this._priority_keys=i:""!==i&&null!==i&&void 0!==i&&(this._priority_keys=[i])},i.prototype.set=function(t){this._keys[this._keys.length]={};var i=this._keys.length-1;if(null===t.keyPath)this._keys[i]=[];else if(Array.isArray(t.keyPath))for(var r=0,e=t.keyPath.length;r<e;r+=1)this._keys[i][t.keyPath[r]]=0;else this._keys[i][t.keyPath]=0},i.prototype.calc=function(t){for(var i=0,r=this._keys.length;i<r;i+=1)void 0!==this._keys[i][t]&&(this._keys[i][t]=1)},i.prototype.clone=function(){var t=new i;t._keys=[],t._priority_keys=[];for(var r=0,e=this._keys.length;r<e;r+=1){t._keys[r]||(t._keys[r]={});for(var s in this._keys[r])t._keys[r][s]=0}for(r=0,e=this._priority_keys.length;r<e;r+=1)t._priority_keys[r]=this._priority_keys[r];return t},i.prototype.getResult=function(){for(var t=[],i=0,r=this._keys.length;i<r;i+=1){var e=0,s=0,y=0;for(var n in this._keys[i])e+=1,s+=this._keys[i][n],~this._priority_keys.indexOf(n)&&(y+=1);0!==e&&e===s&&(t[t.length]={index:i,match_num:s,priority_num:y})}return t.sort(function(t,i){return t.priority_num<i.priority_num?1:t.priority_num>i.priority_num?-1:t.match_num<i.match_num?1:t.match_num>i.match_num?-1:0}),t},t.IndexAggregator=i}(this);