!function(t){"use strict";var n=function(){this.keys=[],this.conditions=[]};n.prototype.addKeysFromCondition=function(t){"value"!==t.key_type||~this.keys.indexOf(t.left_key)||(this.keys[this.keys.length]=t.left_key)},n.prototype.addCondition=function(t,n){this.addKeysFromCondition(t),n?this.conditions=this.conditions.concat(t.clone().not().normalize()):this.conditions=this.conditions.concat(t.clone().normalize())},n.prototype.merge=function(t){var n=0,o=0;for(n=0,o=t.keys.length;o>n;n+=1)~this.keys.indexOf(t.keys[n])||(this.keys[this.keys.length]=t.keys[n]);for(n=0,o=t.conditions.length;o>n;n+=1)this.conditions[this.conditions.length]=t.conditions[n].clone();return this},n.prototype.clone=function(){var t=new n;t.keys=this.keys.concat();for(var o=0,i=this.conditions.length;i>o;o+=1)t.conditions[o]=this.conditions[o].clone();return t},n.prototype.not=function(){for(var t=[],o=0,i=this.conditions.length;i>o;o+=1){var e=new n;e.addCondition(this.conditions[o],!0),t[t.length]=e}return t},t.Query=n}(this);